---
title: "Homework3"
author: "Nico"
date: "2024-10-03"
output: html_document
---

```{r global options and data download, echo=FALSE}
#Download libraries
  library(knitr)
  library(ggplot2)
  library(tidyverse)
  library(kableExtra)
#Download data sets
  principals <- read.csv('Homework3_principals.csv')
  ratings <-  read.csv('Homework3_ratings.csv')
  tv <- read.csv('Homework3_tvSeries.csv')
  
#Global Options
  options(digits=2)
```

# Homework 3

## Part 1

### Question 1

```{r Figure}
# I will answer Question 1 here. 
tvTibble <- as_tibble(tv)
TVNR <- filter(tvTibble, !is.na(endYear))
# Create new column
TVNR <- mutate(TVNR, tvRun = endYear-startYear)
#Display the data. 
ggplot(TVNR) + geom_histogram(aes(x=tvRun), col='#fc9272', fill='#fc9272') + labs(title = 'TV Run by Years', x= 'Years', y='TV Series Count') + theme_minimal() 

#Store the value I need in a new tibble for the inline code, and turning it into a data frame to output it since r can't display tibble values in inline codes.
TVNR0 <- filter(TVNR, tvRun=='0')
TVNR00 <- as.data.frame(TVNR0)
NoRun <- length(TVNR00$tvRun)

```

This graph shows the distribution of TV series based on their number of years running. The X-axis represents the number of years that a TV series lasted, while the Y-axis indicates the count of TV series. The tallest bar corresponds to TV series that ran for 0 years, meaning they likely were canceled or concluded within their first season. As the number of years increases, the count of TV series decreases significantly, showing that few shows have long runs. Most TV series do not last beyond a few years, and very few make it to 6 or more years. The total amount of series that lasted 0 years is `r NoRun`.

### Question 2

```{r}
#What proportion of the TV series have rating information
  TvRatings <- inner_join(tv, ratings, by ="tconst")
sum(!is.na(TvRatings$averageRating))/nrow(tv)
#All of the tv series have ratings. 
TvRatings <- as_tibble(TvRatings)
TvSuccess <- filter(TvRatings, averageRating>=9, numVotes>=20000)
TvSuccess <- arrange(TvSuccess, (primaryTitle))
TvSuccessPrint <- as.data.frame(select(TvSuccess, primaryTitle))
is.data.frame(TvSuccessPrint)
# Note, to display the titles, a kable table was needed since R markdown can't print the data frame I created.
```
All of the TV series have rating information.

The series who had a rating of 9 or higher with at least 20,000 votes, sorted alphabetically from A-Z were the following:
`r knitr::kable(TvSuccessPrint, col.names = "TV Series Title")`
This table showcases successful TV series according to user ratings and provides an alphabetical listing of these top-rated shows.

### Question 3

```{r}
TvCast <- inner_join(tv, principals, by ="tconst")
TvCast <- mutate(TvCast, tvAge = startYear-birthYear)
TvCastFilter <- filter(TvCast, !is.na(tvAge), !is.na(birthYear))
TvCastSummarized <- summarise(
  group_by(TvCastFilter, category),
  median_age = median(tvAge, na.rm = TRUE)
)

#Compare distribution of median ages for each category of principals
```
Here is the median ages of TV casts and crew by category of principals at the start of these TV series: 
`r kable(TvCastSummarized, col.names = c("Principal Category", "Median Age at TV Start"))`

This table shows the median ages of people in different categories of TV series principals (like actors, actresses, and writers) when the TV series started. Each row represents a specific category (e.g., actor, actress, writer), and the table provides the median age for that group at the time the TV show began. It is able to show things like the fact that TV writers tend to be older than the rest of the category groups, or that Actresses tend to be the youngest.

### Question 4
I chose the dataset that I used in my project because it was the one I felt connected to the most. I am a big music fan, and in fact listen to music in 4 languages. I love music, and was interested in the dataset from the moment I saw it. The context of the data interested me because it took place in 2020, meaning that it included music before streaming platforms and after streaming platforms. I chose the predictors I did because of the following reasons: 
1. Rank in 2020: I had to describe the data with regards to the rolling stones ranking, seeing as though the dataset came from the rolling stones. I had to compare this variable to the weeks on billboard, which was my outcome variable, to see how much the rolling stone relied on this measure to choose the best album of all time. To my surprise, this variable had a slight, and not big impact on their ratings. I expected this relationship with my outcome variable to be strongly correlated but I was mistaken.
2. Spotify Popularity: I chose this predictor because it allowed me to measure the longevity of albums from the past, meaning before spotify, and how streamed they are in this new platform, as well as compare their streams to modern albums and music. Spotify made music easier to access, and in turn it interested me to analyze this data with regard to weeks on billboard. I expected this variable to be somewhat correlated, and was not surprised to see that I was right. 
3. Genre: This was the categorical variable that I decided to analyze, and I decided to analyze it because it allows me to get introspection into the greatest albums of all time, by comparing this variable to weeks on billboard. I expected hip hop to be the genre with the highest median of weeks on billboard, but was surprised to find out that it is actually heartland rock. 

### Question 5 
I faced a few challenges, the main one being styles for my graph like centering titles and finding the best ways to display data. I thought about things like this more time than when I was actually coding. I overcame this challenges by simply trying things out instead of spending time in my head, and my incorporating a portion of css styles, a language that I used before alongside html. Next time I plan to do all the technical things first before styling, and I also struggled with inline codes to get all the data for my analysis and display it, but I feel like I got a lot more proficient with it and it won't be an issue going forward. 
What I learned about myself as a data science student:
I am very particular about my work and wanted, and tend to analyze things in my head to the point in which I get frustrated before I even attempt things. However, I get invested with my analysis and enjoy it. I learned that I have to try things for myself to fully understand them as well, as the project helped me look into different functions that we had learned in class I even learned about citing a bit, and always ended up doing a bit more than what I expected to do. 

### Question 6

I believe that my personal background influenced the way I analyzed this data because I valued weeks on billboard as more important data than rank in 2020 when choosing my outcome variable because I wouldn't trust a rolling stone article given that I have a bigger cultural background and more exposure to music. I also believe that spotify ranking and weeks on billboard doesn't necessarily define the best album of all time, but they are positive indicators. I paid attention to the latin pop genre specifically, and was happy to see its success. I feel like someone with a different background might have chosen other predictors, and taken more interest in a variable that isn't weeks on billboard. Overall, my perspective in music is broad which is why I chose to analyze genre in comparison to weeks on billboard. 